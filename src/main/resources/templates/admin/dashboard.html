<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management</title>
    <link rel="stylesheet" href="/css/styles.css">
    <!-- jQuery 포함 -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<h1>User List</h1>

<!-- API 호출 버튼 -->
<button id="loadUsersBtn">사용자 목록 불러오기</button>

<!-- JSON 데이터를 표시할 영역 -->
<pre id="jsonDisplay" style="background-color: #f4f4f4; padding: 10px; border: 1px solid #ccc;"></pre>
</body>
<script type="text/javascript">
    // 버튼 클릭 시 API를 호출하여 사용자 목록을 가져오는 함수
    function loadUsers() {
        $.ajax({
            url: '/user/userList', // API 엔드포인트
            type: 'GET',
            contentType: 'application/json',
            success: function(data) {
                console.log('데이터 수신:', data); // 전체 응답을 콘솔에 로그

                // JSON 데이터를 문자열로 변환하여 화면에 표시
                var jsonData = JSON.stringify(data, null, 4); // 4는 들여쓰기(indent) 크기
                $('#jsonDisplay').text(jsonData); // JSON 데이터를 <pre> 태그에 표시
            },
            error: function(xhr, status, error) {
                console.error('사용자 데이터를 불러오지 못했습니다:', status, error);
                alert('사용자 데이터를 불러오지 못했습니다');
            }
        });
    }

    // 버튼 클릭 이벤트를 함수에 바인딩
    $(document).ready(function() {
        console.log("Document ready");
        $('#loadUsersBtn').click(function() {
            console.log("버튼 클릭됨");
            loadUsers(); // 버튼 클릭 시 loadUsers 함수 실행
        });
    });
</script>

</html>
